# ============================================================================
# Lunatria Backend Environment Configuration
# ============================================================================
# Copy this file to .env and update with your actual values
# Do not commit .env file to version control

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Application port
PORT=3000

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# MongoDB connection URI (full connection string)
# Example: mongodb://username:password@host:port/database?options
MONGODB_URI=mongodb://localhost:27018/nest

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis connection URL
# Default: redis://127.0.0.1:6380
REDIS_URL=redis://127.0.0.1:6380

# ============================================================================
# DOMAIN & NETWORK CONFIGURATION
# ============================================================================

# Root domain name (without protocol)
# Used for CORS, cookies, and service URL generation
# Examples: lunatria.com, example.local, 192.168.1.100
DOMAIN_NAME=lunatria.test

# CORS allowed protocol (http or https)
CORS_PROTOCOL=https

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# Passport session secret key
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
PASSPORT_SECRET=your_passport_secret_here_change_me

# Credential encryption key (for storing service credentials)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CREDENTIAL_ENCRYPTION_KEY=your_encryption_key_here_change_me

# Session cookie max age in milliseconds (default: 24 hours)
SESSION_COOKIE_MAX_AGE=86400000

# Service auth cookie max age in milliseconds (default: 24 hours)
SERVICE_COOKIE_MAX_AGE=86400000

# ============================================================================
# EXTERNAL SERVICES - BASE URLS
# ============================================================================

# Jellyfin media server internal URL (used by backend for auth)
JELLYFIN_BASE_URL=http://jellyfin:8096

# Radarr movie service internal URL
RADARR_BASE_URL=http://radarr:7878

# Sonarr TV show service internal URL
SONARR_BASE_URL=http://sonarr:8989

# ============================================================================
# EXTERNAL SERVICES - PUBLIC URLS (for frontend/redirects)
# ============================================================================

# Note: These are automatically built from DOMAIN_NAME if not provided
# Format: {PROTOCOL}://{SUBDOMAIN}.{DOMAIN_NAME}

# Override if needed (optional):
# JELLYFIN_PUBLIC_URL=https://jellyfin.lunatria.com
# RADARR_PUBLIC_URL=https://radarr.lunatria.com
# SONARR_PUBLIC_URL=https://sonarr.lunatria.com
# HOARDER_PUBLIC_URL=https://hoarder.lunatria.com
# NEXTCLOUD_PUBLIC_URL=https://nextcloud.lunatria.com
# VAULTWARDEN_PUBLIC_URL=https://vaultwarden.lunatria.com
# KOMGA_PUBLIC_URL=https://komga.lunatria.com


